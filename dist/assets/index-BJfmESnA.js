(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function u(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=u(e);fetch(e.href,t)}})();let d=null,c=null,a=null,m=null;const p=document.getElementById("videoElement"),n=document.getElementById("audioVisualizer"),h=document.getElementById("startButton"),g=document.getElementById("stopButton"),l=n.getContext("2d");async function b(){try{d=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),p.srcObject=d,c=new AudioContext,a=c.createAnalyser(),c.createMediaStreamSource(d).connect(a),a.fftSize=256,w(),h.disabled=!0,g.disabled=!1}catch(r){console.error("Error accessing media devices:",r),alert("Failed to access camera and microphone. Please ensure you have granted permission.")}}function E(){d&&(d.getTracks().forEach(r=>r.stop()),p.srcObject=null),c&&(c.close(),c=null),m&&cancelAnimationFrame(m),l.clearRect(0,0,n.width,n.height),h.disabled=!1,g.disabled=!0}function w(){if(!a)return;const r=a.frequencyBinCount,i=new Uint8Array(r),u=n.width,o=n.height;function e(){m=requestAnimationFrame(e),a.getByteFrequencyData(i),l.fillStyle="#f0f0f0",l.fillRect(0,0,u,o);const t=u/r*2.5;let s=0;for(let f=0;f<r;f++){const y=i[f]/255*o;l.fillStyle="rgb(0, 123, 255)",l.fillRect(s,o-y,t,y),s+=t+1}}e()}function v(){n.width=n.offsetWidth,n.height=n.offsetHeight}h.addEventListener("click",b);g.addEventListener("click",E);window.addEventListener("resize",v);v();
